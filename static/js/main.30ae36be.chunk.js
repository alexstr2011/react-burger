(this["webpackJsonpreact-burger"]=this["webpackJsonpreact-burger"]||[]).push([[0],{101:function(e,t,r){e.exports={ingredient:"burger-constructor-element_ingredient__1FPfh"}},102:function(e,t,r){e.exports={main:"home_main__1Iott"}},11:function(e,t,r){e.exports={wrapper:"order-element_wrapper__1_rwA",history:"order-element_history__1D2q6",feed:"order-element_feed__2D-mF",row:"order-element_row__2nq70",rowFar:"order-element_rowFar__2-Phf",picturesList:"order-element_picturesList__2tvFC",pictureContainer:"order-element_pictureContainer__38wNJ",picture:"order-element_picture__X72Gz",hiddenIngredients:"order-element_hiddenIngredients__16Qlu",readyOrder:"order-element_readyOrder__22fx0"}},110:function(e,t,r){},19:function(e,t,r){e.exports={header:"app-header_header__3ppBU",wrapper:"app-header_wrapper__2WFsj",flexContainer:"app-header_flexContainer__2O8rU",profile:"app-header_profile__28pUV app-header_flexContainer__2O8rU",link:"app-header_link__3uXmW",linkActive:"app-header_linkActive__11fqb"}},190:function(e,t,r){"use strict";r.r(t);var n=r(1),a=r.n(n),c=r(34),i=r.n(c),s=r(5),o=(r(110),r(44)),l=o.c,d=function(){return Object(o.b)()},u=r(9),j=r(4),m=r(19),p=r.n(m),b=r(0),_=function(){return Object(b.jsx)("header",{className:p.a.header+" m-10",children:Object(b.jsxs)("div",{className:p.a.wrapper+" m-5",children:[Object(b.jsxs)("nav",{className:p.a.flexContainer,children:[Object(b.jsxs)(s.c,{exact:!0,to:"/",className:p.a.link,activeClassName:p.a.linkActive,children:[Object(b.jsx)(j.BurgerIcon,{type:"secondary"}),Object(b.jsx)("p",{className:"text text_type_main-default ml-2 mr-2",children:"\u041a\u043e\u043d\u0441\u0442\u0440\u0443\u043a\u0442\u043e\u0440"})]}),Object(b.jsxs)(s.c,{to:"/feed",className:p.a.link,activeClassName:p.a.linkActive,children:[Object(b.jsx)(j.ListIcon,{type:"secondary"}),Object(b.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})]})]}),Object(b.jsx)(s.c,{exact:!0,to:"/",className:p.a.link,children:Object(b.jsx)(j.Logo,{})}),Object(b.jsx)("nav",{children:Object(b.jsxs)(s.c,{to:"/profile",className:"".concat(p.a.link,"  ").concat(p.a.profile),activeClassName:p.a.linkActive,children:[Object(b.jsx)(j.ProfileIcon,{type:"secondary"}),Object(b.jsx)("p",{className:"text text_type_main-default ml-2",children:"\u041b\u0438\u0447\u043d\u044b\u0439 \u043a\u0430\u0431\u0438\u043d\u0435\u0442"})]})})]})})},O=r(55),x=r.n(O),f=r(99),h=r.n(f),g=function(e){var t=e.closeModal;return Object(b.jsx)("div",{onClick:t,className:h.a.overlay})},y=document.getElementById("react-modals"),v=function(e){var t=e.closeModal,r=e.children,n=e.title;return a.a.useEffect((function(){var e=function(e){"Escape"===e.code&&t()};return document.addEventListener("keydown",e),function(){document.removeEventListener("keydown",e)}}),[t]),y&&i.a.createPortal(Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("section",{className:x.a.modal,children:[Object(b.jsxs)("header",{className:x.a.header,children:[Object(b.jsx)("p",{className:"text text_type_main-large mt-10 ml-10",children:n}),Object(b.jsx)("div",{onClick:t,className:x.a.closeButton+" mt-15 mr-10",children:Object(b.jsx)(j.CloseIcon,{type:"primary"})})]}),r]}),Object(b.jsx)(g,{closeModal:t})]}),y)},N=r(23),R=r.n(N),E=function(e){var t=e.addTitle,r=void 0!==t&&t,n=l((function(e){return e.burgerIngredientsReducer.data})),a=Object(u.i)().id,c=n.find((function(e){return e._id===a}));return c?Object(b.jsxs)("section",{className:R.a.ingredientDetails+" mb-15",children:[r&&Object(b.jsx)("h2",{className:R.a.header,children:Object(b.jsx)("p",{className:"text text_type_main-large",children:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430"})}),Object(b.jsx)("img",{src:c.image_large,className:R.a.image,alt:c.name}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-4 mb-8",children:c.name}),Object(b.jsxs)("div",{className:R.a.row,children:[Object(b.jsxs)("div",{className:R.a.column,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u041a\u0430\u043b\u043e\u0440\u0438\u0438, \u043a\u043a\u0430\u043b"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:c.calories})]}),Object(b.jsxs)("div",{className:R.a.column,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0411\u0435\u043b\u043a\u0438, \u0433"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:c.proteins})]}),Object(b.jsxs)("div",{className:R.a.column,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0416\u0438\u0440\u044b, \u0433"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:c.fat})]}),Object(b.jsxs)("div",{className:R.a.column,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:"\u0423\u0433\u043b\u0435\u0432\u043e\u0434\u044b, \u0433"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:c.carbohydrates})]})]})]}):Object(b.jsx)("p",{children:"Loading..."})},w=r(2),S=r(54);function C(e,t,r){r=r||{};var n=(r=Object(w.a)({path:"/"},r)).expires;if("number"===typeof n&&n){var a=new Date;a.setTime(a.getTime()+1e3*n),n=r.expires=a}n&&n.toUTCString&&(r.expires=n.toUTCString());var c=e+"="+(t=encodeURIComponent(t));for(var i in r){c+="; "+i;var s=r[i];!0!==s&&(c+="="+s)}document.cookie=c}function k(e){var t=document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)"));return t?decodeURIComponent(t[1]):void 0}var T,I=["children"],L=function(e){var t=e.children,r=Object(S.a)(e,I),n=l((function(e){return e.userReducer.user})),a=k("accessToken");return Object(b.jsx)(u.b,Object(w.a)(Object(w.a)({},r),{},{render:function(e){var r=e.location;return n&&n.name||a?t:Object(b.jsx)(u.a,{to:{pathname:"/login",state:{from:r}}})}}))},D=["children","isLogin"],U=function(e){var t=e.children,r=e.isLogin,n=Object(S.a)(e,D),a=l((function(e){return e.userReducer.user})),c=k("accessToken");return Object(b.jsx)(u.b,Object(w.a)(Object(w.a)({},n),{},{render:function(e){var n=e.location.state,i=r&&n&&n.from?n.from:"/";return a&&a.name||c?Object(b.jsx)(u.a,{to:i}):t}}))},A=r(195),F=r(104),W=r(8),P=r(196),B=r(45),M=r.n(B),G=function(e){var t=e.data,r=e.ingredientAmount,n=Object(P.a)({type:"ingredient",item:t,collect:function(e){return{isDrag:e.isDragging()}}}),a=Object(W.a)(n,2),c=a[0].isDrag,i=a[1],s=c?.1:1;return Object(b.jsxs)("div",{ref:i,className:M.a.ingredient+" ml-4 mb-10 mt-6",style:{opacity:s},children:[Object(b.jsx)("img",{className:M.a.image,src:t.image,alt:t.name,title:t.name}),Object(b.jsxs)("div",{className:M.a.price+" m-2",children:[Object(b.jsx)("p",{className:"text text_type_digits-default mr-2",children:t.price}),Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]}),Object(b.jsx)("p",{className:M.a.name+" text text_type_main-default",children:t.name}),Object(b.jsx)(j.Counter,{count:r||0,size:"default"})]})},H=r(46),J=r.n(H),z=function(){var e=l((function(e){return{data:e.burgerIngredientsReducer.data,ingredientTypes:e.ingredientTypesReducer,burgerConstructor:e.burgerConstructorReducer}})),t=e.data,r=e.ingredientTypes,n=e.burgerConstructor,c=Object(u.h)(),i=a.a.useMemo((function(){var e={};return n.bun&&(e[n.bun._id]=2),n.inners.forEach((function(t){e[t._id]?e[t._id]++:e[t._id]=1})),e}),[n]),o=a.a.useRef(null),d=a.a.useRef([]);d.current=r.map((function(e,t){var r;return null!==(r=d.current[t])&&void 0!==r?r:a.a.createRef()}));var m=a.a.useState(r[0].type),p=Object(W.a)(m,2),_=p[0],O=p[1],x=function(e){O(e);var t=r.findIndex((function(t){return t.type===e}));if(-1!==t){var n=d.current[t].current;n&&n.scrollIntoView({behavior:"smooth"})}},f=r.map((function(e,r){return Object(b.jsxs)("li",{children:[Object(b.jsx)("p",{ref:d.current[r],className:"text text_type_main-medium",children:e.name}),Object(b.jsx)("ul",{className:J.a.ingredientsOfType,"data-name":e.name,children:t.filter((function(t){return t.type===e.type})).map((function(e){return Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{className:J.a.link,to:{pathname:"/ingredients/".concat(e._id),state:{background:c}},children:Object(b.jsx)(G,{data:e,ingredientAmount:i[e._id]})})},e._id)}))})]},e.type)}));return Object(b.jsxs)("section",{children:[Object(b.jsx)("p",{className:"text text_type_main-large",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),Object(b.jsx)("nav",{ref:o,className:J.a.menu+" mt-5 mb-10",children:r.map((function(e){return Object(b.jsx)(j.Tab,{value:e.type,active:_===e.type,onClick:x,children:e.name},e.type)}))}),Object(b.jsx)("ul",{onScroll:function(){var e=o.current?o.current.getBoundingClientRect().top:0,t=r.map((function(t,r){return{type:t.type,distance:Math.abs(e-d.current[r].current.getBoundingClientRect().top)}})).sort((function(e,t){return e.distance-t.distance}))[0].type;_!==t&&O(t)},className:J.a.ingredientsList+" scrollbar",children:f})]})},V=r(197),X="https://norma.nomoreparties.space/api/auth/user",Q="BURGER_INGREDIENTS/LOAD",q="BURGER_INGREDIENTS/LOAD_SUCCESS",Z="BURGER_INGREDIENTS/LOAD_FAILED",Y="BURGER_CONSTRUCTOR/ADD",K="BURGER_CONSTRUCTOR/REMOVE",$="BURGER_CONSTRUCTOR/REMOVE_ALL",ee="BURGER_CONSTRUCTOR/MOVE",te="ORDER_NUMBER/LOAD",re="ORDER_NUMBER/LOAD_SUCCESS",ne="ORDER_NUMBER/LOAD_FAILED",ae="ORDER_NUMBER/DELETE",ce=function(e){return function(t){fetch("https://norma.nomoreparties.space/api/auth/token",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed getting data from server")})).then((function(r){if(!r.success)throw new Error("Failed to login");var n=r.accessToken,a=r.refreshToken;C("accessToken",n.split("Bearer ")[1]),localStorage.setItem("refreshToken",a),t(e)})).catch((function(e){console.log(e.message)}))}},ie=function e(t){return function(r){r({type:te}),fetch("https://norma.nomoreparties.space/api/orders",{method:"POST",headers:{"Content-Type":"application/json",authorization:"Bearer "+k("accessToken")},body:JSON.stringify({ingredients:t})}).then((function(e){return e.json()})).then((function(e){if(!e.success)throw e;r({type:re,number:e.order.number})})).catch((function(n){"jwt expired"===n.message&&r(ce(e(t))),console.log(n.message),r({type:ne})}))}},se=r(101),oe=r.n(se),le=function(e){var t=e.element,r=e.type,n=e.index,c=d(),i=a.a.useRef(null),s=Object(P.a)({type:"sorting",item:{index:n},collect:function(e){return{isDrag:e.isDragging()}}}),o=Object(W.a)(s,2),l=o[0].isDrag,u=o[1],m=Object(V.a)({accept:"sorting",drop:function(e,t){var r,a=e.index,s=n;if(a!==s&&(s||0===s)){var o=null===(r=i.current)||void 0===r?void 0:r.getBoundingClientRect();if(o){var l=(o.bottom-o.top)/2,d=t.getClientOffset();d&&o.top+l>d.y?c({type:ee,indexFrom:a,indexTo:s}):a!==s+1&&c({type:ee,indexFrom:a,indexTo:s+1})}}},collect:function(e){return{isHover:e.isOver()}}}),p=Object(W.a)(m,2),_=p[0].isHover;u((0,p[1])(i));var O=_&&!l?"brightness(2)":"none",x=l?.1:1,f=!!r,h=t.name;return r&&(h+="top"===r?" (\u0432\u0435\u0440\u0445)":" (\u043d\u0438\u0437)"),Object(b.jsxs)("div",Object(w.a)(Object(w.a)({},r?"":{ref:i}),{},{className:oe.a.ingredient,style:{filter:O,opacity:x},children:[!f&&Object(b.jsx)(j.DragIcon,{type:"primary"}),Object(b.jsx)(j.ConstructorElement,{type:r,isLocked:f,text:h,price:t.price,thumbnail:t.image,handleClose:function(){c({type:K,ingredient:t,index:n})}})]}))},de=r(78),ue=r.n(de),je=r.p+"static/media/checkMark.dc2f52b0.png",me=function(e){var t=e.orderNumber;return Object(b.jsxs)("section",{className:ue.a.order,children:[Object(b.jsx)("p",{className:"text text_type_digits-large mt-8",children:t}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-8 mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),Object(b.jsx)("img",{src:je,className:ue.a.checkMark,alt:"Done"}),Object(b.jsx)("p",{className:"text text_type_main-default mt-15 mb-2",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mb-30",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})},pe=r(29),be=r.n(pe),_e=function(){var e,t,r=Object(u.g)(),n=l((function(e){return{data:e.burgerConstructorReducer,order:e.orderNumberReducer,user:e.userReducer.user}})),a=n.data,c=n.order,i=n.user,s=d(),o=Object(V.a)({accept:"ingredient",drop:function(e){s({type:Y,ingredient:e,localId:Math.floor(1e4*Math.random())})},collect:function(e){return{isHover:e.isOver()}}}),m=Object(W.a)(o,2),p=m[0].isHover,_=m[1],O=p?"brightness(1.5)":"none",x=0;a.bun&&(e=Object(b.jsx)(le,{element:a.bun,type:"top"}),t=Object(b.jsx)(le,{element:a.bun,type:"bottom"}),x=2*a.bun.price);var f=a.inners.map((function(e,t){return Object(b.jsx)(le,{element:e,index:t},e.key)}));return x+=a.inners.reduce((function(e,t){return e+t.price}),0),Object(b.jsxs)("section",{className:be.a.constructor+" ml-10 pt-15 pl-4",children:[Object(b.jsxs)("section",{ref:_,className:be.a.list,style:{filter:O},children:[!a.bun&&!a.inners.length&&Object(b.jsx)("p",{className:be.a.info,children:"Drag the ingredients to make your order"}),e,Object(b.jsx)("div",{className:be.a.innerList+" scrollbar",children:f}),t]}),Object(b.jsxs)("div",{className:be.a.order+" mt-10",children:[Object(b.jsx)("p",{className:"text text_type_digits-medium mr-2",children:x}),Object(b.jsx)(j.CurrencyIcon,{type:"primary"}),Object(b.jsx)("div",{className:"ml-10 mr-4",children:c.isLoading?Object(b.jsx)("p",{className:be.a.orderInfo,children:"Creating..."}):Object(b.jsx)(j.Button,{onClick:function(){if(i&&i.name){if(a.bun){var e=a.inners.map((function(e){return e._id}));a.bun&&(e.push(a.bun._id),e.push(a.bun._id)),s(ie(e))}}else r.push("/login")},type:"primary",size:"large",children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})})]}),!!c.number&&Object(b.jsx)(v,{closeModal:function(){s({type:ae}),s({type:$})},children:Object(b.jsx)(me,{orderNumber:c.number})})]})},Oe=r(102),xe=r.n(Oe),fe=function(){return Object(b.jsx)(b.Fragment,{children:Object(b.jsx)(A.a,{backend:F.a,children:Object(b.jsxs)("main",{className:xe.a.main,children:[Object(b.jsx)(z,{}),Object(b.jsx)(_e,{})]})})})},he="USER/LOGIN",ge="USER/LOGIN_SUCCESS",ye="USER/LOGIN_FAILED",ve="USER/LOGOUT",Ne="USER/LOGOUT_SUCCESS",Re="USER/LOGOUT_FAILED",Ee="USER/REGISTER",we="USER/REGISTER_SUCCESS",Se="USER/REGISTER_FAILED",Ce="USER/GET_USER",ke="USER/GET_USER_SUCCESS",Te="USER/GET_USER_FAILED",Ie="USER/UPDATE_USER",Le="USER/UPDATE_USER_SUCCESS",De="USER/UPDATE_USER_FAILED",Ue=function(){return function(e){e({type:ve}),fetch("https://norma.nomoreparties.space/api/auth/logout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:localStorage.getItem("refreshToken")})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed getting data from server")})).then((function(t){if(!t.success)throw new Error("Failed to logout");C("accessToken","",{"max-age":-1}),localStorage.removeItem("refreshToken"),e({type:Ne})})).catch((function(t){console.log(t.message),e({type:Re})}))}},Ae=function e(){return function(t){t({type:Ce}),fetch(X,{method:"GET",headers:{"Content-Type":"application/json",authorization:"Bearer "+k("accessToken")}}).then((function(e){return e.json()})).then((function(e){if(!e.success)throw e;t({type:ke,user:e.user})})).catch((function(r){"jwt expired"===r.message&&t(ce(e())),t({type:Te})}))}},Fe=function e(t,r,n){return function(a){a({type:Ie}),fetch(X,{method:"PATCH",headers:{"Content-Type":"application/json",authorization:"Bearer "+k("accessToken")},body:JSON.stringify({email:t,password:r,name:n})}).then((function(e){return e.json()})).then((function(e){if(!e.success)throw e;a({type:Le,user:e.user})})).catch((function(c){"jwt expired"===c.message&&a(ce(e(t,r,n))),console.log(c.message),a({type:De})}))}},We=r(24),Pe=r.n(We),Be=function(){var e=a.a.useState(""),t=Object(W.a)(e,2),r=t[0],n=t[1],c=a.a.useState(""),i=Object(W.a)(c,2),o=i[0],l=i[1],u=d(),m=a.a.useCallback((function(e){e.preventDefault(),u(function(e,t){return function(r){r({type:he}),fetch("https://norma.nomoreparties.space/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed getting data from server")})).then((function(e){if(!e.success)throw new Error("Failed to login");var t=e.accessToken,n=e.refreshToken;C("accessToken",t.split("Bearer ")[1],{expires:1200}),localStorage.setItem("refreshToken",n),r({type:ge,user:e.user})})).catch((function(e){console.log(e.message),r({type:ye})}))}}(r,o))}),[u,r,o]),p=a.a.useCallback((function(e){n(e.target.value)}),[n]),_=a.a.useCallback((function(e){l(e.target.value)}),[l]);return Object(b.jsxs)("section",{className:Pe.a.wrapper,children:[Object(b.jsxs)("form",{onSubmit:m,className:Pe.a.form,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412\u0445\u043e\u0434"}),Object(b.jsx)("div",{className:Pe.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.EmailInput,{name:"email",value:r,onChange:p})}),Object(b.jsx)("div",{className:Pe.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.PasswordInput,{name:"password",value:o,onChange:_})}),Object(b.jsx)("div",{className:"mb-20",children:Object(b.jsx)(j.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0439\u0442\u0438"})})]}),Object(b.jsxs)("section",{className:Pe.a.textRow+" mb-4",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-2",children:"\u0412\u044b - \u043d\u043e\u0432\u044b\u0439 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c?"}),Object(b.jsx)(s.b,{to:"/register",className:Pe.a.link,children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(b.jsxs)("section",{className:Pe.a.textRow,children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-2",children:"\u0417\u0430\u0431\u044b\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(b.jsx)(s.b,{to:"/forgot-password",className:Pe.a.link,children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c"})})]})]})},Me=r(30),Ge=r.n(Me),He=r(21),Je=r.n(He),ze=function(){var e=d();return Object(b.jsxs)("section",{className:Je.a.menu,children:[Object(b.jsx)("nav",{children:Object(b.jsxs)("ul",{className:Je.a.menuList,children:[Object(b.jsx)("li",{children:Object(b.jsx)(s.c,{to:"/profile",className:Je.a.menuItemLink,activeClassName:Je.a.menuActiveItemLink,exact:!0,children:Object(b.jsx)("p",{className:Je.a.menuItem+" text text_type_main-medium",children:"\u041f\u0440\u043e\u0444\u0438\u043b\u044c"})})}),Object(b.jsx)("li",{children:Object(b.jsx)(s.c,{to:"/profile/orders",className:Je.a.menuItemLink,activeClassName:Je.a.menuActiveItemLink,children:Object(b.jsx)("p",{className:Je.a.menuItem+" text text_type_main-medium",children:"\u0418\u0441\u0442\u043e\u0440\u0438\u044f \u0437\u0430\u043a\u0430\u0437\u043e\u0432"})})}),Object(b.jsx)("li",{children:Object(b.jsx)("p",{onClick:function(){e(Ue())},className:Je.a.menuItem+" "+Je.a.menuItemLink+" text text_type_main-medium",children:"\u0412\u044b\u0445\u043e\u0434"})})]})}),Object(b.jsxs)("p",{className:"text text_type_main-default text_color_inactive mt-20",children:["\u0412 \u044d\u0442\u043e\u043c \u0440\u0430\u0437\u0434\u0435\u043b\u0435 \u0432\u044b \u043c\u043e\u0436\u0435\u0442\u0435",Object(b.jsx)("br",{}),"\u0438\u0437\u043c\u0435\u043d\u0438\u0442\u044c \u0441\u0432\u043e\u0438 \u043f\u0435\u0440\u0441\u043e\u043d\u0430\u043b\u044c\u043d\u044b\u0435 \u0434\u0430\u043d\u043d\u044b\u0435"]})]})},Ve=function(){var e=l((function(e){return e.userReducer.user})),t=a.a.useState(""),r=Object(W.a)(t,2),n=r[0],c=r[1],i=a.a.useState(""),s=Object(W.a)(i,2),o=s[0],m=s[1],p=a.a.useState(""),_=Object(W.a)(p,2),O=_[0],x=_[1];a.a.useEffect((function(){e&&e.name&&(c((null===e||void 0===e?void 0:e.email)||""),x(e.name))}),[e]);var f=d();return e&&e.name?e&&e.name?Object(b.jsxs)("div",{className:Ge.a.positioning,children:[Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),f(Fe(n,o,O))},className:Ge.a.wrapper,children:[Object(b.jsx)("div",{className:Ge.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.Input,{name:"name",type:"text",value:O,onChange:function(e){x(e.target.value)},placeholder:"\u0418\u043c\u044f",icon:"EditIcon"})}),Object(b.jsx)("div",{className:Ge.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.Input,{name:"email",type:"email",value:n,onChange:function(e){c(e.target.value)},placeholder:"E-mail",icon:"EditIcon"})}),Object(b.jsx)("div",{className:Ge.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.Input,{name:"password",type:"password",value:o,onChange:function(e){m(e.target.value)},placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",icon:"EditIcon"})}),Object(b.jsxs)("div",{className:Ge.a.buttonsRow,children:[Object(b.jsx)(j.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"}),Object(b.jsx)(j.Button,{onClick:function(){c((null===e||void 0===e?void 0:e.email)||""),x((null===e||void 0===e?void 0:e.name)||"")},type:"primary",size:"medium",children:"\u041e\u0442\u043c\u0435\u043d\u0438\u0442\u044c"})]})]}),Object(b.jsx)(ze,{})]}):Object(b.jsx)("p",{children:"Loading..."}):Object(b.jsx)(u.a,{to:{pathname:"/login"}})},Xe=r(27),Qe=r.n(Xe),qe=function(){var e=a.a.useState(""),t=Object(W.a)(e,2),r=t[0],n=t[1],c=a.a.useState(""),i=Object(W.a)(c,2),o=i[0],l=i[1],u=a.a.useState(""),m=Object(W.a)(u,2),p=m[0],_=m[1],O=d(),x=a.a.useCallback((function(e){e.preventDefault(),O(function(e,t,r){return function(n){n({type:Ee}),fetch("https://norma.nomoreparties.space/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t,name:r})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed getting data from server")})).then((function(e){if(!e.success)throw new Error("Failed to register the user");var t=e.accessToken,r=e.refreshToken;C("accessToken",t.split("Bearer ")[1],{expires:1200}),localStorage.setItem("refreshToken",r),n({type:we,user:e.user})})).catch((function(e){console.log(e.message),n({type:Se})}))}}(r,o,p))}),[O,r,o,p]),f=a.a.useCallback((function(e){n(e.target.value)}),[n]),h=a.a.useCallback((function(e){l(e.target.value)}),[l]),g=a.a.useCallback((function(e){_(e.target.value)}),[_]);return Object(b.jsxs)("section",{className:Qe.a.wrapper,children:[Object(b.jsxs)("form",{onSubmit:x,className:Qe.a.form,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"}),Object(b.jsx)("div",{className:Qe.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.Input,{name:"name",type:"text",value:p,onChange:g,placeholder:"\u0418\u043c\u044f"})}),Object(b.jsx)("div",{className:Qe.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.EmailInput,{name:"email",value:r,onChange:f})}),Object(b.jsx)("div",{className:Qe.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.PasswordInput,{name:"password",value:o,onChange:h})}),Object(b.jsx)("div",{className:"mb-20",children:Object(b.jsx)(j.Button,{type:"primary",size:"medium",children:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"})})]}),Object(b.jsxs)("section",{className:Qe.a.textRow+" mb-4",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-2",children:"\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"}),Object(b.jsx)(s.b,{to:"/login",className:Qe.a.link,children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},Ze="PASSWORD/FORGOT_PASSWORD",Ye="PASSWORD/FORGOT_PASSWORD_SUCCESS",Ke="PASSWORD/FORGOT_PASSWORD_FAILED",$e="PASSWORD/RESET_PASSWORD",et="PASSWORD/RESET_PASSWORD_SUCCESS",tt="PASSWORD/RESET_PASSWORD_FAILED",rt=r(35),nt=r.n(rt),at=function(){var e=l((function(e){return e.passwordReducer.isForgot})),t=Object(u.h)(),r=a.a.useState(""),n=Object(W.a)(r,2),c=n[0],i=n[1],o=d(),m=a.a.useCallback((function(e){e.preventDefault(),c&&o(function(e){return function(t){t({type:Ze}),fetch("https://norma.nomoreparties.space/api/password-reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed getting data from server")})).then((function(e){if(!e.success)throw new Error("Failed creating order");t({type:Ye})})).catch((function(e){console.log(e.message),t({type:Ke})}))}}(c))}),[c,o]),p=a.a.useCallback((function(e){i(e.target.value)}),[i]);return e?Object(b.jsx)(u.a,{to:{pathname:"/reset-password",state:{from:t}}}):Object(b.jsxs)("section",{className:nt.a.wrapper,children:[Object(b.jsxs)("form",{onSubmit:m,className:nt.a.form,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsx)("div",{className:nt.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.EmailInput,{name:"email",value:c,onChange:p})}),Object(b.jsx)("div",{className:"mb-20",children:Object(b.jsx)(j.Button,{type:"primary",size:"medium",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c"})})]}),Object(b.jsxs)("section",{className:nt.a.textRow+" mb-4",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-2",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(b.jsx)(s.b,{to:"/login",className:nt.a.link,children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},ct=r(31),it=r.n(ct),st=function(){var e=l((function(e){return e.passwordReducer})),t=e.isForgot,r=e.isReset,n=Object(u.h)(),c=a.a.useState(""),i=Object(W.a)(c,2),o=i[0],m=i[1],p=a.a.useState(""),_=Object(W.a)(p,2),O=_[0],x=_[1],f=d(),h=a.a.useCallback((function(e){e.preventDefault(),f(function(e,t){return function(r){r({type:$e}),fetch("https://norma.nomoreparties.space/api/password-reset/reset",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:e,token:t})}).then((function(e){if(e.ok)return e.json();throw new Error("Failed getting data from server")})).then((function(e){if(!e.success)throw new Error("Failed creating order");r({type:et})})).catch((function(e){console.log(e.message),r({type:tt})}))}}(o,O))}),[o,O,f]),g=a.a.useCallback((function(e){m(e.target.value)}),[m]),y=a.a.useCallback((function(e){x(e.target.value)}),[x]);return r||!t?Object(b.jsx)(u.a,{to:{pathname:r?"/login":"/forgot-password",state:{from:n}}}):Object(b.jsxs)("section",{className:it.a.wrapper,children:[Object(b.jsxs)("form",{onSubmit:h,className:it.a.form,children:[Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u0435 \u043f\u0430\u0440\u043e\u043b\u044f"}),Object(b.jsx)("div",{className:it.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.PasswordInput,{name:"password",value:o,onChange:g})}),Object(b.jsx)("div",{className:it.a.inputWrapper+" mb-6",children:Object(b.jsx)(j.Input,{name:"name",type:"text",value:O,onChange:y,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0438\u0437 \u043f\u0438\u0441\u044c\u043c\u0430"})}),Object(b.jsx)("div",{className:"mb-20",children:Object(b.jsx)(j.Button,{type:"primary",size:"medium",children:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"})})]}),Object(b.jsxs)("section",{className:it.a.textRow+" mb-4",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive mr-2",children:"\u0412\u0441\u043f\u043e\u043c\u043d\u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c?"}),Object(b.jsx)(s.b,{to:"/login",className:it.a.link,children:Object(b.jsx)("p",{className:"text text_type_main-default",children:"\u0412\u043e\u0439\u0442\u0438"})})]})]})},ot=function(){return Object(b.jsx)("p",{children:"Page not found!"})},lt=r(22),dt=r.n(lt),ut=function(e){var t=e.data,r=t&&t.orders.filter((function(e){return"done"===e.status})).filter((function(e,t){return t<10})),n=t&&t.orders.filter((function(e){return"pending"===e.status})).filter((function(e,t){return t<10}));return Object(b.jsxs)("section",{className:dt.a.wrapper,children:[Object(b.jsx)("table",{className:dt.a.table,children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{className:dt.a.tableHeader,children:[Object(b.jsx)("th",{className:dt.a.firstColumn,children:Object(b.jsx)("p",{className:"text text_type_main-medium",children:"\u0413\u043e\u0442\u043e\u0432\u044b:"})}),Object(b.jsx)("th",{children:Object(b.jsx)("p",{className:"text text_type_main-medium",children:"\u0412 \u0440\u0430\u0431\u043e\u0442\u0435:"})})]}),Object(b.jsxs)("tr",{className:dt.a.tableRow,children:[Object(b.jsx)("td",{className:dt.a.firstColumn,children:Object(b.jsx)("ul",{className:dt.a.list,children:r&&r.map((function(e){return Object(b.jsx)("li",{className:dt.a.readyOrder,children:Object(b.jsx)("p",{className:"text text_type_digits-default",children:e.number})},e._id)}))})}),Object(b.jsx)("td",{children:Object(b.jsx)("ul",{className:dt.a.list,children:n&&n.map((function(e){return Object(b.jsx)("li",{className:dt.a.readyOrder,children:Object(b.jsx)("p",{className:"text text_type_digits-default",children:e.number})},e._id)}))})})]})]})}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0432\u0441\u0435 \u0432\u0440\u0435\u043c\u044f:"}),Object(b.jsx)("p",{className:"text text_type_digits-large",children:t?t.total:"-"}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-15",children:"\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d\u043e \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f:"}),Object(b.jsx)("p",{className:"text text_type_digits-large",children:t?t.totalToday:"-"})]})};!function(e){e.done="\u0412\u044b\u043f\u043e\u043b\u043d\u0435\u043d",e.created="\u0421\u043e\u0437\u0434\u0430\u043d",e.pending="\u0413\u043e\u0442\u043e\u0432\u0438\u0442\u0441\u044f"}(T||(T={}));var jt=function(e){return Object.values(T).find((function(t){return t===e}))},mt=r(11),pt=r.n(mt);function bt(e){var t=new Date(e),r=new Intl.DateTimeFormat("ru-ru",{timeZoneName:"short",hour:"2-digit",minute:"2-digit"}).format(t),n=t.setHours(0,0,0,0),a=(new Date).setHours(0,0,0,0),c=Math.floor(Math.abs(n-a)/864e5);return(0===c?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":1===c?"\u0412\u0447\u0435\u0440\u0430":"".concat(c," \u0434\u043d\u0435\u0439 \u043d\u0430\u0437\u0430\u0434"))+", "+r}var _t=function(e){var t=e.data,r=e.isHistory,n=void 0!==r&&r,c=l((function(e){return e.burgerIngredientsReducer.data})),i=a.a.useMemo((function(){return t.ingredients.map((function(e){return c.find((function(t){return t._id===e}))})).filter((function(e){return e}))}),[t.ingredients,c]),s=a.a.useMemo((function(){return i.reduce((function(e,t){return e+((null===t||void 0===t?void 0:t.price)||0)}),0)}),[i]),o=i.filter((function(e,t){return t<=5})),d=i.length!==o.length?i.length-o.length+1:0;return Object(b.jsxs)("section",{className:pt.a.wrapper+" "+(n?pt.a.history:pt.a.feed)+" p-6",children:[Object(b.jsxs)("div",{className:pt.a.row+" "+pt.a.rowFar,children:[Object(b.jsxs)("p",{className:"text text_type_digits-default",children:["#",t.number]}),Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:bt(t.createdAt)})]}),Object(b.jsx)("p",{className:"text text_type_main-medium mt-6 mb-2",children:t.name}),Object(b.jsx)("p",{className:"text text_type_main-default mb-6 "+pt.a.readyOrder,children:jt(t.status)}),Object(b.jsxs)("div",{className:pt.a.row+" "+pt.a.rowFar,children:[Object(b.jsx)("ul",{className:pt.a.picturesList+" "+pt.a.row,children:o&&o.map((function(e,t){var r=!!d&&0===t;return e&&Object(b.jsxs)("li",{className:pt.a.pictureContainer,children:[Object(b.jsx)("img",{src:e.image,alt:e.name,className:pt.a.picture}),r&&Object(b.jsx)("p",{className:"text text_type_main-default "+pt.a.hiddenIngredients,children:"+".concat(d)})]},e._id+t)}))}),Object(b.jsxs)("div",{className:pt.a.row,children:[Object(b.jsx)("p",{className:"text text_type_digits-default mr-2",children:s}),Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]})]})]})},Ot=r(47),xt=r.n(Ot),ft="WS_ALL_ORDERS_ACTION/CONNECTION_START",ht="WS_ALL_ORDERS_ACTION/CONNECTION_SUCCESS",gt="WS_ALL_ORDERS_ACTION/CONNECTION_ERROR",yt="WS_ALL_ORDERS_ACTION/CONNECTION_CLOSED",vt="WS_ALL_ORDERS_ACTION/GET_MESSAGE",Nt="WS_USER_ORDERS_ACTION/CONNECTION_START",Rt="WS_USER_ORDERS_ACTION/CONNECTION_SUCCESS",Et="WS_USER_ORDERS_ACTION/CONNECTION_ERROR",wt="WS_USER_ORDERS_ACTION/CONNECTION_CLOSED",St="WS_USER_ORDERS_ACTION/GET_MESSAGE",Ct=function(){var e=Object(u.h)(),t=d(),r=l((function(e){return e.allOrdersReducer})),n=r.wsConnected,a=r.data;n||t({type:ft});var c=a&&a.orders;return Object(b.jsxs)("div",{className:xt.a.allWrapper,children:[Object(b.jsx)("p",{className:"text text_type_main-large mt-10 mb-5",children:"\u041b\u0435\u043d\u0442\u0430 \u0437\u0430\u043a\u0430\u0437\u043e\u0432"}),Object(b.jsxs)("div",{className:xt.a.wrapper,children:[Object(b.jsx)("ul",{className:xt.a.list+" scrollbar",children:c&&c.map((function(t){return Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{className:xt.a.link,to:{pathname:"/feed/".concat(t._id),state:{background:e}},children:Object(b.jsx)(_t,{data:t})})},t._id)}))}),Object(b.jsx)(ut,{data:a})]})]})},kt=r(56),Tt=r.n(kt),It=function(){var e=Object(u.h)(),t=d(),r=l((function(e){return e.userOrdersReducer})),n=r.wsConnected,a=r.data;n||t({type:Nt,token:k("accessToken")});var c=a&&a.orders;return Object(b.jsxs)("div",{className:Tt.a.wrapper,children:[Object(b.jsx)(ze,{}),Object(b.jsx)("ul",{className:Tt.a.list+" scrollbar",children:c&&c.map((function(t){return Object(b.jsx)("li",{children:Object(b.jsx)(s.b,{className:Tt.a.link,to:{pathname:"/profile/orders/".concat(t._id),state:{background:e}},children:Object(b.jsx)(_t,{data:t,isHistory:!0})})},t._id)}))})]})},Lt=r(80),Dt=r.n(Lt),Ut=r(20),At=r.n(Ut),Ft=function(){var e=d(),t=Object(u.h)(),r=Object(u.i)().id,n=l((function(e){return e.burgerIngredientsReducer.data})),c=t.pathname.includes("/feed"),i=l((function(e){return e.allOrdersReducer}));c&&i&&!i.wsConnected&&e({type:ft});var s=l((function(e){return e.userOrdersReducer}));c||!s||s.wsConnected||e({type:Nt,token:k("accessToken")});var o,m=c?i.data:s.data;r&&m&&m.orders&&(o=m.orders.find((function(e){return e._id===r})));var p=a.a.useMemo((function(){return o?o.ingredients.map((function(e){return n.find((function(t){return t._id===e}))})).filter((function(e){return e})):null}),[o,n]),_=a.a.useMemo((function(){return p?p.reduce((function(e,t){return e+((null===t||void 0===t?void 0:t.price)||0)}),0):0}),[p]);return o?Object(b.jsxs)("section",{className:At.a.wrapper,children:[Object(b.jsxs)("p",{className:"text text_type_digits-default mb-10 "+At.a.number,children:["#",o.number]}),Object(b.jsx)("p",{className:"text text_type_main-medium mb-3",children:o.name}),Object(b.jsx)("p",{className:"text text_type_main-default mb-15 "+At.a.status,children:jt(o.status)}),Object(b.jsx)("p",{className:"text text_type_main-medium mb-6",children:"\u0421\u043e\u0441\u0442\u0430\u0432:"}),Object(b.jsx)("ul",{className:At.a.list+" scrollbar",children:p&&p.map((function(e,t){return e&&Object(b.jsxs)("li",{className:At.a.row,children:[Object(b.jsx)("div",{className:At.a.pictureContainer,children:Object(b.jsx)("img",{className:At.a.picture,src:e.image,alt:e.name})}),Object(b.jsx)("p",{className:"text text_type_main-default ml-4 mr-4 "+At.a.ingredient,children:e.name}),Object(b.jsx)("p",{className:"text text_type_digits-default mr-2 "+At.a.toTheRight,children:e.price}),Object(b.jsx)("div",{className:"mr-2",children:Object(b.jsx)(j.CurrencyIcon,{type:"primary"})})]},e._id+t)}))}),Object(b.jsxs)("div",{className:At.a.row+" mt-10 mb-10",children:[Object(b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:bt(o.createdAt)}),Object(b.jsx)("p",{className:"text text_type_digits-default mr-2 "+At.a.toTheRight,children:_}),Object(b.jsx)(j.CurrencyIcon,{type:"primary"})]})]}):Object(b.jsx)("p",{children:"Loading..."})},Wt=function(){var e=d(),t=l((function(e){return e.burgerIngredientsReducer})),r=t.isLoading,n=t.isError,c=t.data;a.a.useEffect((function(){e(Ae()),e((function(e){e({type:Q}),fetch("https://norma.nomoreparties.space/api/ingredients").then((function(e){if(e.ok)return e.json();throw new Error("Failed getting data from server")})).then((function(t){e({type:q,data:t.data})})).catch((function(t){console.log(t.message),e({type:Z})}))}))}),[e]);var i=Object(u.g)(),s=Object(u.h)(),o="PUSH"===i.action&&s.state&&s.state.background,j=function(){i.goBack()};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(_,{}),r&&Object(b.jsx)("p",{className:Dt.a.info,children:"Loading..."}),n&&Object(b.jsx)("p",{className:Dt.a.error,children:"Failed getting data from server"}),!r&&!n&&!!c.length&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(u.d,{location:o||s,children:[Object(b.jsx)(u.b,{path:"/",exact:!0,children:Object(b.jsx)(fe,{})}),Object(b.jsx)(U,{path:"/login",exact:!0,isLogin:!0,children:Object(b.jsx)(Be,{})}),Object(b.jsx)(U,{path:"/register",exact:!0,children:Object(b.jsx)(qe,{})}),Object(b.jsx)(U,{path:"/forgot-password",exact:!0,children:Object(b.jsx)(at,{})}),Object(b.jsx)(U,{path:"/reset-password",exact:!0,children:Object(b.jsx)(st,{})}),Object(b.jsx)(L,{path:"/profile",exact:!0,children:Object(b.jsx)(Ve,{})}),Object(b.jsx)(L,{path:"/profile/orders",exact:!0,children:Object(b.jsx)(It,{})}),Object(b.jsx)(L,{path:"/profile/orders/:id",exact:!0,children:Object(b.jsx)(Ft,{})}),Object(b.jsx)(u.b,{path:"/feed",exact:!0,children:Object(b.jsx)(Ct,{})}),Object(b.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(b.jsx)(Ft,{})}),Object(b.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(b.jsx)(E,{addTitle:!0})}),Object(b.jsx)(u.b,{children:Object(b.jsx)(ot,{})})]}),o&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(u.b,{path:"/ingredients/:id",exact:!0,children:Object(b.jsx)(v,{title:"\u0414\u0435\u0442\u0430\u043b\u0438 \u0438\u043d\u0433\u0440\u0435\u0434\u0438\u0435\u043d\u0442\u0430",closeModal:j,children:Object(b.jsx)(E,{})})}),Object(b.jsx)(u.b,{path:"/feed/:id",exact:!0,children:Object(b.jsx)(v,{closeModal:j,children:Object(b.jsx)(Ft,{})})}),Object(b.jsx)(L,{path:"/profile/orders/:id",exact:!0,children:Object(b.jsx)(v,{closeModal:j,children:Object(b.jsx)(Ft,{})})})]})]})]})},Pt=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,198)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),c(e),i(e)}))},Bt=r(26),Mt=r(103),Gt=r(36),Ht={user:{name:null,email:null},isLoading:!1,isError:!1},Jt={isForgot:!1,isForgotLoading:!1,isForgotError:!1,isReset:!1,isResetLoading:!1,isResetError:!1},zt={wsConnected:!1,error:null,data:null},Vt=[{type:"bun",name:"\u0411\u0443\u043b\u043a\u0438"},{type:"sauce",name:"\u0421\u043e\u0443\u0441\u044b"},{type:"main",name:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}],Xt={data:[],isLoading:!1,isError:!1},Qt={bun:null,inners:[]},qt={number:null,isLoading:!1,isError:!1},Zt=Object(Bt.b)({ingredientTypesReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Vt;return e},burgerIngredientsReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Q:return Object(w.a)(Object(w.a)({},e),{},{data:[],isLoading:!0,isError:!1});case Z:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,isError:!0});case q:return Object(w.a)(Object(w.a)({},e),{},{data:t.data,isLoading:!1,isError:!1});default:return e}},burgerConstructorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Y:var r=t.ingredient._id+t.localId,n=Object(w.a)(Object(w.a)({},t.ingredient),{},{key:r});return"bun"===t.ingredient.type?Object(w.a)(Object(w.a)({},e),{},{bun:n}):Object(w.a)(Object(w.a)({},e),{},{inners:[].concat(Object(Gt.a)(e.inners),[n])});case K:return"bun"===t.ingredient.type?e:Object(w.a)(Object(w.a)({},e),{},{inners:[].concat(Object(Gt.a)(e.inners.slice(0,t.index)),Object(Gt.a)(e.inners.slice(t.index+1)))});case $:return Qt;case ee:var a=t.indexTo>t.indexFrom?t.indexTo-1:t.indexTo,c=e.inners.filter((function(e,r){return r!==t.indexFrom}));return Object(w.a)(Object(w.a)({},e),{},{inners:[].concat(Object(Gt.a)(c.slice(0,a)),[e.inners[t.indexFrom]],Object(Gt.a)(c.slice(a)))});default:return e}},orderNumberReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:qt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case te:return Object(w.a)(Object(w.a)({},e),{},{number:null,isLoading:!0,isError:!1});case ne:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,isError:!0});case re:return Object(w.a)(Object(w.a)({},e),{},{number:t.number,isLoading:!1,isError:!1});case ae:return qt;default:return e}},userReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case he:return Object(w.a)(Object(w.a)({},e),{},{user:Ht.user,isLoading:!0,isError:!1});case ye:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,isError:!0});case ge:return Object(w.a)(Object(w.a)({},e),{},{user:t.user,isLoading:!1,isError:!1});case ve:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0,isError:!1});case Re:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,isError:!0});case Ne:return Object(w.a)(Object(w.a)({},e),{},{user:Ht.user,isLoading:!1,isError:!1});case Ee:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0,isError:!1});case Se:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,isError:!0});case we:return Object(w.a)(Object(w.a)({},e),{},{user:t.user,isLoading:!1,isError:!1});case Ce:return Object(w.a)(Object(w.a)({},e),{},{user:Ht.user,isLoading:!0,isError:!1});case Te:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,isError:!0});case ke:return Object(w.a)(Object(w.a)({},e),{},{user:t.user,isLoading:!1,isError:!1});case Ie:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!0,isError:!1});case De:return Object(w.a)(Object(w.a)({},e),{},{isLoading:!1,isError:!0});case Le:return Object(w.a)(Object(w.a)({},e),{},{user:t.user,isLoading:!1,isError:!1});default:return e}},passwordReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Ze:return Object(w.a)(Object(w.a)({},e),{},{isReset:!1,isForgot:!1,isForgotLoading:!0,isForgotError:!1});case Ke:return Object(w.a)(Object(w.a)({},e),{},{isForgotLoading:!1,isForgotError:!0});case Ye:return Object(w.a)(Object(w.a)({},e),{},{isForgot:!0,isForgotLoading:!1,isForgotError:!1});case $e:return Object(w.a)(Object(w.a)({},e),{},{isReset:!1,isResetLoading:!0,isResetError:!1});case tt:return Object(w.a)(Object(w.a)({},e),{},{isResetLoading:!1,isResetError:!0});case et:return Object(w.a)(Object(w.a)({},e),{},{isReset:!0,isResetLoading:!1,isResetError:!1});default:return e}},allOrdersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case ht:return Object(w.a)(Object(w.a)({},e),{},{error:null,wsConnected:!0});case gt:return Object(w.a)(Object(w.a)({},e),{},{error:t.payload,wsConnected:!1});case yt:return Object(w.a)(Object(w.a)({},e),{},{error:null,wsConnected:!1});case vt:return Object(w.a)(Object(w.a)({},e),{},{error:null,data:t.payload});default:return e}},userOrdersReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rt:return Object(w.a)(Object(w.a)({},e),{},{error:null,wsConnected:!0});case Et:return Object(w.a)(Object(w.a)({},e),{},{error:t.payload,wsConnected:!1});case wt:return Object(w.a)(Object(w.a)({},e),{},{error:null,wsConnected:!1});case St:return Object(w.a)(Object(w.a)({},e),{},{error:null,data:t.payload});default:return e}}}),Yt=function(){var e,t=(window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Bt.c)(Object(Bt.a)(Mt.a,(e="wss://norma.nomoreparties.space/orders/all",function(t){var r=null;return function(n){return function(a){var c=t.dispatch;a.type===ft&&(r=new WebSocket(e)),r&&(r.onopen=function(e){c({type:ht,payload:e})},r.onerror=function(e){c({type:gt,payload:e})},r.onmessage=function(e){c({type:vt,payload:JSON.parse(e.data)})},r.onclose=function(e){c({type:yt,payload:e})}),n(a)}}}),function(e){return function(t){var r=null;return function(n){return function(a){var c=t.dispatch,i=a.type,s=a.token;i===Nt&&(r=new WebSocket("".concat(e,"?token=").concat(s))),r&&(r.onopen=function(e){c({type:Rt,payload:e})},r.onerror=function(e){c({type:Et,payload:e})},r.onmessage=function(e){var t=JSON.parse(e.data);c({type:St,payload:t})},r.onclose=function(e){c({type:wt,payload:e})}),n(a)}}}}("wss://norma.nomoreparties.space/orders")));return Object(Bt.d)(Zt,t)}();i.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(o.a,{store:Yt,children:Object(b.jsx)(s.a,{basename:"/react-burger",children:Object(b.jsx)(Wt,{})})})}),document.getElementById("root")),Pt()},20:function(e,t,r){e.exports={wrapper:"order-info_wrapper__3P8ij",number:"order-info_number__2F_pW",status:"order-info_status__zuh3J",list:"order-info_list__2cOHn",row:"order-info_row__3jAHc",pictureContainer:"order-info_pictureContainer__3FuZE",picture:"order-info_picture__Tgkp8",ingredient:"order-info_ingredient__22BEG",toTheRight:"order-info_toTheRight__10wPQ"}},21:function(e,t,r){e.exports={menu:"profile-menu_menu__1MaHm",menuList:"profile-menu_menuList__3JfUQ",menuItem:"profile-menu_menuItem__AarR8",menuItemLink:"profile-menu_menuItemLink__1Jw1R",menuActiveItemLink:"profile-menu_menuActiveItemLink__20Jut"}},22:function(e,t,r){e.exports={wrapper:"orders-overview_wrapper__3oakR",table:"orders-overview_table__13dkx",tableHeader:"orders-overview_tableHeader__4LZuk",tableRow:"orders-overview_tableRow__2XQYo",firstColumn:"orders-overview_firstColumn__Mq0Vc",list:"orders-overview_list__Hc7w6",readyOrder:"orders-overview_readyOrder__1dRPp"}},23:function(e,t,r){e.exports={ingredientDetails:"ingredient-details_ingredientDetails__3pIKJ",header:"ingredient-details_header__3jvOG",image:"ingredient-details_image__z6wBE",row:"ingredient-details_row__sTpTL",column:"ingredient-details_column__1tCDR"}},24:function(e,t,r){e.exports={wrapper:"login_wrapper__2yNW5",form:"login_form__3K8Di",textRow:"login_textRow__m_9Ty",inputWrapper:"login_inputWrapper__q2xjk",link:"login_link__eSs3K"}},27:function(e,t,r){e.exports={wrapper:"register_wrapper__2mn0B",form:"register_form__1ZdWI",textRow:"register_textRow__2B3kY",inputWrapper:"register_inputWrapper__2wTwP",link:"register_link__1fSnn"}},29:function(e,t,r){e.exports={constructor:"burger-constructor_constructor__1V75P",info:"burger-constructor_info__O_b_R",orderInfo:"burger-constructor_orderInfo__myJSl",list:"burger-constructor_list__3lSj3",innerList:"burger-constructor_innerList__12nE-",dropHovering:"burger-constructor_dropHovering__M38G-",order:"burger-constructor_order__2L6bi"}},30:function(e,t,r){e.exports={positioning:"profile_positioning__3qaHa",wrapper:"profile_wrapper__1l-mW",inputWrapper:"profile_inputWrapper__2zCz0",buttonsRow:"profile_buttonsRow__YSbu_"}},31:function(e,t,r){e.exports={wrapper:"reset-password_wrapper__Him1Z",form:"reset-password_form__1XXyP",textRow:"reset-password_textRow__MPpxo",inputWrapper:"reset-password_inputWrapper__34B0s",link:"reset-password_link__S2D1B"}},35:function(e,t,r){e.exports={wrapper:"forgot-password_wrapper__3fY7x",form:"forgot-password_form__2jDx2",textRow:"forgot-password_textRow__1fE9B",inputWrapper:"forgot-password_inputWrapper__3XOg8",link:"forgot-password_link__18sV_"}},45:function(e,t,r){e.exports={ingredient:"burger-list-ingredient_ingredient__3CePY",image:"burger-list-ingredient_image__1bwha",price:"burger-list-ingredient_price__4qXCw",name:"burger-list-ingredient_name__35dIJ",counter:"burger-list-ingredient_counter__bsAfp"}},46:function(e,t,r){e.exports={menu:"burger-ingredients_menu__3YlfP",list:"burger-ingredients_list__bFVrQ",ingredientsOfType:"burger-ingredients_ingredientsOfType__p4ydM burger-ingredients_list__bFVrQ",ingredientsList:"burger-ingredients_ingredientsList__2Si3Q burger-ingredients_list__bFVrQ",link:"burger-ingredients_link__1yd8j"}},47:function(e,t,r){e.exports={allWrapper:"feed_allWrapper__1FXUg",wrapper:"feed_wrapper__3Jq-Q",list:"feed_list__2MTef",link:"feed_link__3iCZZ"}},55:function(e,t,r){e.exports={modal:"modal_modal__s09PW",header:"modal_header__2ELyG",closeButton:"modal_closeButton__3IdWB"}},56:function(e,t,r){e.exports={wrapper:"history_wrapper__3ZgNH",list:"history_list__t8no9",link:"history_link__3Itla"}},78:function(e,t,r){e.exports={order:"order-details_order__13glx",checkMark:"order-details_checkMark__1uXxc"}},80:function(e,t,r){e.exports={info:"app_info__3neIR",error:"app_error__1WYOr"}},99:function(e,t,r){e.exports={overlay:"modal-overlay_overlay__19FPt"}}},[[190,1,2]]]);
//# sourceMappingURL=main.30ae36be.chunk.js.map